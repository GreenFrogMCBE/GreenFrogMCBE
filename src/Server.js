process.env.DEBUG = process.argv.includes("--debug") ? "minecraft-protocol" : "";

const bedrock = require('bedrock-protocol')
const Logger = require('./console/Logger')
const ConsoleCommandSender = require('./console/ConsoleCommandSender')
const ServerInfo = require('./api/ServerInfo')
const PlayerInfo = require('./player/PlayerInfo')
const ValidateConfig = require('./server/ValidateConfig')
const Loader = require('./plugins/Loader')
const fs = require('fs');
let clients = []

ValidateConfig.prototype.ValidateConfig()
ValidateConfig.prototype.ValidateLangFile()
ValidateConfig.prototype.ValidateCommands()

const config = ServerInfo.config
const lang = ServerInfo.lang
const commands = ServerInfo.commands

Logger.prototype.log(lang.loadingserver)

process.on('uncaughtException', function (err) {
    Logger.prototype.log(`${lang.servererror}: ${err.stack}`, 'error')
    if (!config.donotcrashoncriticalerrors) {
        process.exit(-1)
    }
})

process.on('uncaughtExceptionMonitor', function (err) {
    Logger.prototype.log(`${lang.servererror}: ${err.stack}`, 'error')
    if (!config.donotcrashoncriticalerrors) {
        process.exit(-1)
    }
})

process.on('unhandledRejection', function (err) {
    Logger.prototype.log(`${lang.servererror}: ${err.stack}`, 'error')
    if (!config.donotcrashoncriticalerrors) {
        process.exit(-1)
    }
})

const get = (packetName) => require(`./network/packets/${packetName}.json`)

if (config.donotcrashoncriticalerrors) {
    Logger.prototype.log(lang.unstablewarning, 'warning')
}

if (config.debug) {
    Logger.prototype.log(lang.debugwarning, 'warning')
}

Logger.prototype.log(`${lang.scch}`)
Loader.prototype.loadPlugins()
setTimeout(() => { ConsoleCommandSender.prototype.start() }, 900)

let server
try {
    server = bedrock.createServer({
        host: config.host,
        port: config.port,
        version: config.version,
        conLog: true,
        offline: config.offlinemode,
        maxPlayers: config.maxplayers,
        motd: {
            motd: config.motd,
            levelName: config.softwarename
        }
    })
    Logger.prototype.log(`${lang.listening_on.replace(`%ipport%`, `/${config.host}:${config.port}`)}`)
} catch (e) {
    Logger.prototype.log(`${lang.listening_failed.replace(`%ipport%`, `/${config.host}:${config.port}`).replace('%error%', e)}`, 'error')
    process.exit(-1)
}

server.on('connect', client => {
    client.on('join', () => {
        Logger.prototype.log(lang.playerconnected.replace('%player%', client.getUserData().displayName))

        client.write('resource_packs_info', {
            must_accept: false,
            has_scripts: false,
            behaviour_packs: [],
            texture_packs: []
        })

        fs.readdir("./plugins", (err, plugins) => {
            plugins.forEach(plugin => {
                try {
                    require(`../plugins/${plugin}`).prototype.onResourcePackInfoSent(server, client)
                } catch (e) {
                    Logger.prototype.log(lang.failedtoexecuteonresourcepackinfosent.replace('%plugin%', plugin).replace('%e%', e.stack, 'error'), 'error')
                }
            });
        });

        clients.push(client)
        PlayerInfo.prototype.setPlayers(clients)
    })

    function handlepk(client, packet) {
        //console.log('%o', packet)
        switch (packet.data.name) {
            case "resource_pack_client_response":
                switch (packet.data.params.response_status) {
                    case 'none': {
                        Logger.prototype.log(lang.norpsinstalled.replace('%player%', client.getUserData().displayName))
                        fs.readdir("./plugins", (err, plugins) => {
                            plugins.forEach(plugin => {
                                try {
                                    require(`../plugins/${plugin}`).prototype.onPlayerHasNoResourcePacksInstalled(server, client)
                                } catch (e) {
                                    Logger.prototype.log(Logger.prototype.log(lang.failedtoexecuteonplayerhasnoresourcepacksinstalled.replace('%plugin%', plugin).replace('%e%', e.stack, 'error')), 'error')
                                }
                            });
                        });
                    }
                    case 'refused': {
                        fs.readdir("./plugins", (err, plugins) => {
                            plugins.forEach(plugin => {
                                try {
                                    require(`../plugins/${plugin}`).prototype.onResourcePacksRefused(server, client)
                                } catch (e) {
                                    Logger.prototype.log(lang.failedtoexecuteonresourcepacksrefused.replace('%plugin%', plugin).replace('%e%', e.stack, 'error'), 'error')
                                }
                            });
                        });
                        Logger.prototype.log(lang.rpsrefused.replace('%player%', client.getUserData().displayName))
                        client.kick(lang.resource_packs_refused)
                    }
                    case 'have_all_packs': {
                        fs.readdir("./plugins", (err, plugins) => {
                            plugins.forEach(plugin => {
                                try {
                                    require(`../plugins/${plugin}`).prototype.onPlayerHaveAllPacks(server, client)
                                } catch (e) {
                                    Logger.prototype.log(lang.failedtoexecuteonplayerhaveallpacks.replace('%plugin%', plugin).replace('%e%', e.stack, 'error'), 'error')
                                }
                            });
                        });
                        Logger.prototype.log(lang.rpsinstalled.replace('%player%', client.getUserData().displayName))

                        client.write('resource_pack_stack', {
                            must_accept: false,
                            behavior_packs: [],
                            resource_packs: [],
                            game_version: '',
                            experiments: [],
                            experiments_previously_used: false
                        })
                        break
                    }
                    case 'completed': {
                        //console.log(client)
                        fs.readdir("./plugins", (err, plugins) => {
                            plugins.forEach(plugin => {
                                try {
                                    require(`../plugins/${plugin}`).prototype.onResourcePacksCompleted(server, client)
                                } catch (e) {
                                    Logger.prototype.log(lang.failedtoexecuteonresourcepackscompleted.replace('%plugin%', plugin).replace('%e%', e.stack, 'error'), 'error')
                                }
                            });
                        });
                        if (client.getUserData().displayName.length < 3) {
                            client.kick(lang.username_is_too_short)
                            return
                        }

                        if (client.getUserData().displayName.length > 16) {
                            if (config.offlinemode) return
                            client.kick(lang.username_is_too_long)
                            return
                        }

                        Logger.prototype.log(lang.joined.replace('%player%', client.getUserData().displayName))
                        client.queue('player_list', get('player_list'))
                        client.queue('start_game', get('start_game'))
                        client.queue('set_spawn_position', get('set_spawn_position'))
                        client.queue('set_commands_enabled', { enabled: true })
                        client.queue('biome_definition_list', get('biome_definition_list'))
                        client.queue('available_entity_identifiers', get('available_entity_identifiers'))
                        client.queue('creative_content', get('creative_content'))
                        client.queue('respawn', get('respawn'))
                        client.queue('client_cache_status', { enabled: false })

                        client.queue('level_chunk', { "x": 0, "z": 0, "sub_chunk_count": 0, "cache_enabled": false, "payload": { "type": "Buffer", "data": [1, 88, 1, 88, 1, 88, 1, 88, 1, 88, 1, 88, 1, 88, 1, 88, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0] } })


                        /*let client2 = bedrock.createClient({
                            host: 'KinashProjectspOk7.aternos.me',   // optional
                            port: 49107,         // optional, default 19132
                            username: client.username
                        })

                        client2.on('packet', (packet) => {
                            switch (packet.data.name) {
                                case "server_to_client_handshake":
                                case "network_settings":
                                case "player_list":
                                    break
                                default:
                                    if (packet.data.name == 'level_chunk') return
                                    if (!packet.data.name.includes('chunk')) return
                                    client.queue(packet.data.name, packet.data.params)
                            }
                        }) */

                        client.on("subchunk_request", (data) => {
                            console.log("subchunk request:", data)

                            client.queue("subchunk", {
                                dimension: 0,
                                x: 0,
                                y: 0,
                                z: 0,
                                origin: { x: 0, y: 0, z: 0 },
                                "data": {
                                    "type": "Buffer",
                                    "data": [
                                        9,
                                        2,
                                        3,
                                        11,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        32,
                                        0,
                                        241,
                                        32,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        12,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        12,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        12,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        28,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        12,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        195,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        12,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        227,
                                        65,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        28,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        140,
                                        7,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        195,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        6,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        140,
                                        225,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        102,
                                        56,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        225,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        28,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        12,
                                        7,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        161,
                                        22,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        99,
                                        56,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        6,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        44,
                                        227,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        99,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        6,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        172,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        176,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        69,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        193,
                                        6,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        225,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        109,
                                        56,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        225,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        140,
                                        241,
                                        32,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        99,
                                        60,
                                        8,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        140,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        99,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        176,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        108,
                                        56,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        193,
                                        6,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        176,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        56,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        161,
                                        20,
                                        11,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        81,
                                        22,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        69,
                                        149,
                                        226,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        108,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        193,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        140,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        99,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        193,
                                        6,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        99,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        177,
                                        20,
                                        171,
                                        56,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        225,
                                        0,
                                        11,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        56,
                                        176,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        14,
                                        40,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        44,
                                        181,
                                        22,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        56,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        99,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        6,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        176,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        99,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        17,
                                        7,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        196,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        56,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        81,
                                        20,
                                        101,
                                        57,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        225,
                                        0,
                                        11,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        56,
                                        208,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        14,
                                        156,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        237,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        176,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        81,
                                        10,
                                        171,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        16,
                                        50,
                                        28,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        132,
                                        12,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        6,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        12,
                                        54,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        131,
                                        13,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        161,
                                        26,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        140,
                                        56,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        173,
                                        13,
                                        7,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        172,
                                        5,
                                        22,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        56,
                                        176,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        156,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        70,
                                        2,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        112,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        8,
                                        3,
                                        44,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        44,
                                        165,
                                        10,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        131,
                                        12,
                                        7,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        177,
                                        22,
                                        75,
                                        149,
                                        5,
                                        0,
                                        64,
                                        1,
                                        0,
                                        0,
                                        64,
                                        168,
                                        165,
                                        22,
                                        107,
                                        41,
                                        7,
                                        0,
                                        10,
                                        0,
                                        0,
                                        4,
                                        140,
                                        41,
                                        165,
                                        22,
                                        202,
                                        1,
                                        160,
                                        0,
                                        0,
                                        0,
                                        161,
                                        22,
                                        170,
                                        172,
                                        5,
                                        0,
                                        64,
                                        1,
                                        0,
                                        0,
                                        64,
                                        52,
                                        54,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        163,
                                        13,
                                        7,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        209,
                                        26,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        75,
                                        169,
                                        2,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        14,
                                        44,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        225,
                                        0,
                                        230,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        112,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        152,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        16,
                                        50,
                                        0,
                                        11,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        74,
                                        41,
                                        5,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        161,
                                        22,
                                        75,
                                        149,
                                        115,
                                        14,
                                        71,
                                        57,
                                        0,
                                        0,
                                        64,
                                        44,
                                        50,
                                        0,
                                        107,
                                        1,
                                        0,
                                        0,
                                        7,
                                        0,
                                        0,
                                        4,
                                        138,
                                        13,
                                        176,
                                        10,
                                        0,
                                        0,
                                        160,
                                        14,
                                        0,
                                        0,
                                        193,
                                        24,
                                        3,
                                        40,
                                        5,
                                        0,
                                        0,
                                        168,
                                        3,
                                        0,
                                        64,
                                        44,
                                        53,
                                        0,
                                        107,
                                        1,
                                        0,
                                        0,
                                        7,
                                        0,
                                        0,
                                        4,
                                        69,
                                        149,
                                        181,
                                        14,
                                        224,
                                        156,
                                        5,
                                        0,
                                        0,
                                        0,
                                        209,
                                        34,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        180,
                                        56,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        168,
                                        162,
                                        20,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        56,
                                        160,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        14,
                                        20,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        11,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        75,
                                        169,
                                        2,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        161,
                                        20,
                                        101,
                                        173,
                                        229,
                                        0,
                                        96,
                                        1,
                                        0,
                                        0,
                                        64,
                                        44,
                                        165,
                                        22,
                                        10,
                                        0,
                                        0,
                                        0,
                                        7,
                                        0,
                                        0,
                                        4,
                                        139,
                                        12,
                                        7,
                                        22,
                                        0,
                                        0,
                                        0,
                                        14,
                                        0,
                                        0,
                                        193,
                                        24,
                                        3,
                                        0,
                                        5,
                                        0,
                                        0,
                                        128,
                                        3,
                                        0,
                                        64,
                                        48,
                                        54,
                                        0,
                                        96,
                                        1,
                                        0,
                                        0,
                                        224,
                                        0,
                                        0,
                                        4,
                                        140,
                                        13,
                                        0,
                                        20,
                                        0,
                                        0,
                                        128,
                                        14,
                                        0,
                                        0,
                                        161,
                                        24,
                                        3,
                                        40,
                                        5,
                                        0,
                                        0,
                                        156,
                                        7,
                                        1,
                                        64,
                                        172,
                                        181,
                                        10,
                                        171,
                                        0,
                                        0,
                                        20,
                                        0,
                                        0,
                                        0,
                                        4,
                                        45,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        140,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        99,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        161,
                                        22,
                                        75,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        148,
                                        165,
                                        10,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        107,
                                        169,
                                        5,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        6,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        168,
                                        181,
                                        22,
                                        202,
                                        45,
                                        0,
                                        0,
                                        5,
                                        0,
                                        0,
                                        4,
                                        107,
                                        149,
                                        5,
                                        0,
                                        0,
                                        0,
                                        0,
                                        14,
                                        0,
                                        0,
                                        81,
                                        8,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        128,
                                        3,
                                        0,
                                        64,
                                        48,
                                        54,
                                        28,
                                        64,
                                        1,
                                        0,
                                        0,
                                        192,
                                        0,
                                        0,
                                        4,
                                        140,
                                        13,
                                        0,
                                        22,
                                        0,
                                        0,
                                        0,
                                        12,
                                        14,
                                        0,
                                        193,
                                        24,
                                        3,
                                        128,
                                        5,
                                        0,
                                        0,
                                        128,
                                        3,
                                        0,
                                        64,
                                        44,
                                        54,
                                        0,
                                        75,
                                        1,
                                        0,
                                        0,
                                        234,
                                        0,
                                        0,
                                        4,
                                        170,
                                        168,
                                        85,
                                        10,
                                        5,
                                        0,
                                        160,
                                        0,
                                        0,
                                        0,
                                        193,
                                        24,
                                        195,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        56,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        6,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        140,
                                        225,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        107,
                                        45,
                                        181,
                                        22,
                                        10,
                                        0,
                                        160,
                                        0,
                                        0,
                                        0,
                                        161,
                                        22,
                                        10,
                                        0,
                                        0,
                                        0,
                                        0,
                                        168,
                                        3,
                                        0,
                                        64,
                                        16,
                                        50,
                                        28,
                                        0,
                                        0,
                                        0,
                                        0,
                                        224,
                                        56,
                                        0,
                                        4,
                                        140,
                                        13,
                                        0,
                                        22,
                                        0,
                                        0,
                                        0,
                                        12,
                                        0,
                                        0,
                                        193,
                                        24,
                                        3,
                                        128,
                                        5,
                                        0,
                                        0,
                                        0,
                                        3,
                                        0,
                                        64,
                                        48,
                                        54,
                                        0,
                                        96,
                                        1,
                                        0,
                                        0,
                                        224,
                                        0,
                                        0,
                                        4,
                                        139,
                                        13,
                                        80,
                                        22,
                                        0,
                                        0,
                                        176,
                                        14,
                                        0,
                                        0,
                                        161,
                                        20,
                                        107,
                                        173,
                                        165,
                                        0,
                                        0,
                                        20,
                                        0,
                                        0,
                                        64,
                                        48,
                                        54,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        241,
                                        32,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        81,
                                        10,
                                        74,
                                        169,
                                        5,
                                        0,
                                        96,
                                        1,
                                        0,
                                        0,
                                        64,
                                        148,
                                        53,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        7,
                                        0,
                                        0,
                                        4,
                                        139,
                                        12,
                                        0,
                                        20,
                                        0,
                                        0,
                                        128,
                                        14,
                                        0,
                                        0,
                                        193,
                                        24,
                                        195,
                                        1,
                                        5,
                                        0,
                                        0,
                                        128,
                                        3,
                                        0,
                                        64,
                                        48,
                                        54,
                                        0,
                                        160,
                                        0,
                                        0,
                                        0,
                                        224,
                                        0,
                                        0,
                                        4,
                                        140,
                                        13,
                                        0,
                                        22,
                                        0,
                                        0,
                                        0,
                                        14,
                                        0,
                                        0,
                                        161,
                                        24,
                                        195,
                                        149,
                                        5,
                                        0,
                                        0,
                                        28,
                                        0,
                                        0,
                                        64,
                                        148,
                                        165,
                                        0,
                                        101,
                                        1,
                                        0,
                                        22,
                                        0,
                                        0,
                                        0,
                                        4,
                                        44,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        106,
                                        25,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        225,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        99,
                                        56,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        177,
                                        12,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        107,
                                        41,
                                        181,
                                        14,
                                        231,
                                        156,
                                        5,
                                        0,
                                        0,
                                        0,
                                        177,
                                        8,
                                        195,
                                        173,
                                        5,
                                        0,
                                        0,
                                        44,
                                        7,
                                        0,
                                        64,
                                        20,
                                        54,
                                        28,
                                        107,
                                        1,
                                        0,
                                        0,
                                        229,
                                        0,
                                        0,
                                        4,
                                        139,
                                        13,
                                        80,
                                        20,
                                        0,
                                        0,
                                        80,
                                        14,
                                        0,
                                        0,
                                        145,
                                        0,
                                        3,
                                        168,
                                        5,
                                        0,
                                        0,
                                        28,
                                        0,
                                        0,
                                        64,
                                        172,
                                        181,
                                        20,
                                        235,
                                        156,
                                        115,
                                        10,
                                        0,
                                        0,
                                        0,
                                        4,
                                        140,
                                        13,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        193,
                                        26,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        225,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        225,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        99,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        56,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        49,
                                        8,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        44,
                                        181,
                                        20,
                                        74,
                                        57,
                                        0,
                                        20,
                                        0,
                                        0,
                                        0,
                                        4,
                                        107,
                                        173,
                                        162,
                                        22,
                                        11,
                                        0,
                                        80,
                                        0,
                                        0,
                                        0,
                                        177,
                                        22,
                                        107,
                                        169,
                                        162,
                                        28,
                                        0,
                                        44,
                                        0,
                                        0,
                                        64,
                                        168,
                                        165,
                                        22,
                                        106,
                                        1,
                                        0,
                                        20,
                                        0,
                                        0,
                                        0,
                                        4,
                                        140,
                                        13,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        193,
                                        24,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        48,
                                        54,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        56,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        14,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        60,
                                        8,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        15,
                                        2,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        144,
                                        225,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        100,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        6,
                                        15,
                                        2,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        16,
                                        50,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        132,
                                        12,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        65,
                                        8,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        48,
                                        54,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        140,
                                        13,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        193,
                                        24,
                                        3,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        48,
                                        54,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        140,
                                        13,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        1,
                                        0,
                                        38,
                                        232,
                                        119,
                                        192,
                                        75,
                                        140,
                                        2,
                                        142,
                                        78,
                                        152,
                                        112,
                                        242,
                                        113,
                                        156,
                                        112,
                                        248,
                                        113,
                                        216,
                                        106,
                                        208,
                                        17,
                                        246,
                                        113,
                                        244,
                                        113,
                                        162,
                                        112,
                                        136,
                                        70,
                                        210,
                                        106,
                                        214,
                                        106,
                                        212,
                                        106,
                                        224,
                                        104,
                                        236,
                                        17,
                                        5,
                                        0,
                                        0,
                                        0,
                                        0,
                                        5,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        20,
                                        0,
                                        0,
                                        0,
                                        4,
                                        0,
                                        0,
                                        0,
                                        20,
                                        0,
                                        0,
                                        0,
                                        4,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        0,
                                        0,
                                        0,
                                        4,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        80,
                                        0,
                                        0,
                                        0,
                                        80,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        1,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        1,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        1,
                                        0,
                                        0,
                                        64,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        0,
                                        0,
                                        0,
                                        64,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        4,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        0,
                                        0,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        80,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        0,
                                        64,
                                        0,
                                        64,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        1,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        64,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        80,
                                        0,
                                        0,
                                        0,
                                        80,
                                        0,
                                        0,
                                        0,
                                        16,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        80,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        0,
                                        6,
                                        140,
                                        2,
                                        232,
                                        119,
                                        192,
                                        75,
                                        10,
                                        0,
                                        1,
                                        8,
                                        70,
                                        105,
                                        110,
                                        100,
                                        97,
                                        98,
                                        108,
                                        101,
                                        1,
                                        9,
                                        5,
                                        73,
                                        116,
                                        101,
                                        109,
                                        115,
                                        0,
                                        0,
                                        8,
                                        9,
                                        76,
                                        111,
                                        111,
                                        116,
                                        84,
                                        97,
                                        98,
                                        108,
                                        101,
                                        43,
                                        108,
                                        111,
                                        111,
                                        116,
                                        95,
                                        116,
                                        97,
                                        98,
                                        108,
                                        101,
                                        115,
                                        47,
                                        99,
                                        104,
                                        101,
                                        115,
                                        116,
                                        115,
                                        47,
                                        117,
                                        110,
                                        100,
                                        101,
                                        114,
                                        119,
                                        97,
                                        116,
                                        101,
                                        114,
                                        95,
                                        114,
                                        117,
                                        105,
                                        110,
                                        95,
                                        98,
                                        105,
                                        103,
                                        46,
                                        106,
                                        115,
                                        111,
                                        110,
                                        3,
                                        13,
                                        76,
                                        111,
                                        111,
                                        116,
                                        84,
                                        97,
                                        98,
                                        108,
                                        101,
                                        83,
                                        101,
                                        101,
                                        100,
                                        146,
                                        249,
                                        230,
                                        188,
                                        6,
                                        8,
                                        2,
                                        105,
                                        100,
                                        5,
                                        67,
                                        104,
                                        101,
                                        115,
                                        116,
                                        1,
                                        9,
                                        105,
                                        115,
                                        77,
                                        111,
                                        118,
                                        97,
                                        98,
                                        108,
                                        101,
                                        1,
                                        3,
                                        1,
                                        120,
                                        26,
                                        3,
                                        1,
                                        121,
                                        96,
                                        3,
                                        1,
                                        122,
                                        152,
                                        1,
                                        0
                                    ]
                                },
                                "request_result": "success",
                                "heightmap_type": "has_data",
                                "heightmap": {
                                    "type": "Buffer",
                                    "data": [
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15,
                                        15
                                    ]
                                },
                                "cache_enabled": false
                            })
                        })

                        setTimeout(() => {
                            client.write("play_status", { status: "player_spawn" });
                        }, 6000);

                        let loop = setInterval(
                            () =>
                                client.write("network_chunk_publisher_update", {
                                    coordinates: { x: 0, y: 0, z: 0 },
                                    radius: 64,
                                    saved_chunks: [],
                                }),
                            50
                        );

                        client.on("tick_sync", (packet) => {
                            client.write("tick_sync", {
                                request_time: packet.request_time,
                                response_time: BigInt(Date.now()),
                            });
                        });

                        client.chat = function (msg) {
                            client.write('text', {
                                type: 'announcement',
                                needs_translation: false,
                                source_name: '',
                                message: msg,
                                xuid: '',
                                platform_chat_id: ''
                            })
                        }


                        client.kick = function (msg) {
                            if (client.kicked) return
                            if (msg == null || msg == undefined) msg = lang.playerdisconnected
                            fs.readdir("./plugins", (err, plugins) => {
                                plugins.forEach(plugin => {
                                    try {
                                        require(`../plugins/${plugin}`).prototype.onKick(server, client, msg)
                                    } catch (e) {
                                        Logger.prototype.log(lang.failedtoexecuteonkick.replace('%plugin%', plugin).replace('%e%', e.stack), 'error')
                                    }
                                });
                            });
                            client.kicked = true
                            Logger.prototype.log(lang.kicked_consolemsg.replace('%player%', client.getUserData().displayName).replace('%reason%', msg))
                            try { client.disconnect(msg) } catch (e) { }
                        }

                        setInterval(() => {
                            if (client.q) {
                                fs.readdir("./plugins", (err, plugins) => {
                                    plugins.forEach(plugin => {
                                        try {
                                            require(`../plugins/${plugin}`).prototype.onLeave(server, client)
                                        } catch (e) {
                                            Logger.prototype.log(lang.failedtoexecuteonplayerspawn.replace('%plugin%', plugin).replace('%e%', e.stack), 'error')
                                        }
                                    });
                                });
                                if (!client.kicked) {
                                    client.kick(lang.player_disconnected_from_this_server)
                                    Logger.prototype.log(lang.disconnected.replace('%player%', client.getUserData().displayName))
                                }
                                for (let i = 0; i < clients.length; i++) {
                                    clients[i].chat(lang.leftthegame.replace('%username%', client.getUserData().displayName))
                                }
                                delete client.q;
                            }
                        }, 10)

                        Logger.prototype.log(lang.spawned.replace('%player%', client.getUserData().displayName))
                        setTimeout(() => {
                            if (client.q) return
                            client.write('play_status', {
                                status: 'player_spawn'
                            })
                            fs.readdir("./plugins", (err, plugins) => {
                                plugins.forEach(plugin => {
                                    try {
                                        require(`../plugins/${plugin}`).prototype.onPlayerSpawn(server, client)
                                    } catch (e) {
                                        Logger.prototype.log(lang.failedtoexecuteonplayerspawn.replace('%plugin%', plugin).replace('%e%', e.stack), 'error')
                                    }
                                });
                            });
                        }, config.clientloadtime)


                        for (let i = 0; i < clients.length; i++) {
                            clients[i].chat(lang.joinedthegame.replace('%username%', client.getUserData().displayName))
                        }

                        break
                    }
                    default: {
                        console.warn(lang.unhandledpacketdata.replace('%data%', packet.data.params.response_status))
                    }
                }
                break
            case "client_to_server_handshake":
            case "set_local_player_as_initialized":
            case "tick_sync": // TODO: Handle this
            case "emote_list": // TODO: Handle this
            case "set_player_game_type": // TODO: Handle this
            case "client_cache_status": // TODO: Handle this
            case "move_player": // TODO: Handle this
            case "player_action": // TODO: Handle this
                Logger.prototype.log(`${lang.ignoredpacket.replace('%packet%', packet.data.name)}`, 'debug')
                break
            case "request_chunk_radius":
                client.queue('chunk_radius_update', { chunk_radius: 32 })
                break
            case "text":
                let msg = packet.data.params.message;
                let fullmsg = lang.chatformat.replace('%username%', client.getUserData().displayName).replace('%message%', msg);
                fs.readdir("./plugins", (err, plugins) => {
                    plugins.forEach(plugin => {
                        try {
                            require(`../plugins/${plugin}`).prototype.onChat(server, client, msg, fullmsg)
                        } catch (e) {
                            Logger.prototype.log(lang.failedtoexecuteonchat.replace('%plugin%', plugin).replace('%e%', e.stack), 'error')
                        }
                    });
                });
                if (msg.includes("") || msg.length == 0 || msg.length > 255 && config.blockinvalidmessages) {
                    Logger.prototype.log(lang.illegalmessage.replace('%msg%', msg).replace('%player%', client.getUserData().displayName), 'warning')
                    client.kick(lang.invalid_chat_message)
                    return
                }

                if (!msg.replace(/\s/g, '').length) return

                Logger.prototype.log(lang.chatmessage.replace('%message%', fullmsg))

                for (let i = 0; i < clients.length; i++) {
                    clients[i].chat(`${fullmsg}`)
                }
                break
            case "command_request":
                let cmd = packet.data.params.command.toLowerCase();
                fs.readdir("./plugins", (err, plugins) => {
                    plugins.forEach(plugin => {
                        try {
                            require(`../plugins/${plugin}`).prototype.onCommand(server, client, cmd)
                        } catch (e) {
                            Logger.prototype.log(lang.failedtoexecuteoncommand.replace('%plugin%', plugin).replace('%e%', e.stack), 'error')
                        }
                    });
                });
                Logger.prototype.log(lang.executedcmd.replace('%player%', client.getUserData().displayName).replace('%cmd%', cmd))
                if (cmd.toLowerCase().startsWith('/' + lang.command_ver.toLowerCase())) {
                    if (!commands.player_command_ver) {
                        client.chat(lang.playerunknowncommand)
                        return
                    }
                    client.chat(lang.playervercommandline1.replace('%version%', ServerInfo.serverversion))
                    client.chat(lang.playervercommandline2)
                    return
                }
                if (cmd.toLowerCase().startsWith('/' + lang.command_version.toLowerCase())) {
                    if (!commands.player_command_ver) {
                        client.chat(lang.playerunknowncommand)
                        return
                    }
                    client.chat(lang.playervercommandline1.replace('%version%', ServerInfo.serverversion))
                    client.chat(lang.playervercommandline2)
                    return
                }
                if (cmd.toLowerCase().startsWith('/' + lang.command_cmds.toLowerCase())) {
                    if (!commands.player_command_cmds) {
                        client.chat(lang.playerunknowncommand)
                        return
                    }
                    client.chat(lang.commands)
                    client.chat(lang.commandsline1)
                    client.chat(lang.commandsline2)
                    client.chat(lang.commandsline3)
                    client.chat(lang.commandsline4)
                    return
                }
                if (cmd.toLowerCase().startsWith('/' + lang.command_commands.toLowerCase())) {
                    if (!commands.player_command_commands) {
                        client.chat(lang.playerunknowncommand)
                        return
                    }
                    client.chat(lang.commandsline1)
                    client.chat(lang.commandsline2)
                    client.chat(lang.commandsline3)
                    client.chat(lang.commandsline4)
                    return
                }
                client.chat(lang.playerunknowncommand)
            default:
                Logger.prototype.log(lang.unhandledpacket, 'warning')
                console.log('%o', packet)
                break
        }
    }

    client.on('packet', (packet) => {
        try {
            handlepk(client, packet)
        } catch (e) {
            try { client.kick(lang.internal_server_error) } catch (e) { /* who cares? */ }
            fs.readdir("./plugins", (err, plugins) => {
                plugins.forEach(plugin => {
                    try {
                        require(`../plugins/${plugin}`).prototype.onInternalServerError(server, client, err)
                    } catch (e) {
                        Logger.prototype.log(lang.failedtoexecuteoninternalservererror.replace('%plugin%', plugin).replace('%e%', e.stack), 'error')
                    }
                });
            });
            Logger.prototype.log(lang.handlepacketexception.replace('%player%', client.getUserData().displayName).replace('%error%', e.stack), 'error')
        }
    })
})
